@startuml C4_Context
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Context.puml

LAYOUT_WITH_LEGEND()

title System Context Diagram - Embabel Dice RCA

Person(sre, "SRE / On-Call Engineer", "Investigates production incidents")
Person(platform, "Platform Engineer", "Sets up monitoring integrations")

System(rcaAgent, "Embabel RCA Agent", "AI-powered incident analysis system (Kotlin/Spring Boot)")
System(diceServer, "DICE Server", "Manages incident memory & reasoning")

System_Ext(datadog, "Datadog", "Observability platform")
System_Ext(llm, "LLM Provider", "AI reasoning (OpenAI/Anthropic)")
System_Ext(alerting, "Alerting System", "PagerDuty / OpsGenie")
System_Ext(chat, "Chat Platform", "Slack / Teams")

Rel(sre, rcaAgent, "Asks questions", "CLI/Chat")
Rel(platform, diceServer, "Configures alerts", "API")

Rel(rcaAgent, datadog, "Queries telemetry", "REST")
Rel(rcaAgent, llm, "Sends prompts", "API")
Rel(rcaAgent, diceServer, "Pushes analysis", "REST")

Rel(alerting, diceServer, "Sends triggers", "Webhook")
Rel(diceServer, rcaAgent, "Triggers analysis", "REST")
Rel(rcaAgent, chat, "Sends reports", "API")

@enduml
