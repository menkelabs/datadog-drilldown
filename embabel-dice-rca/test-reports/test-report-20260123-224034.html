<!DOCTYPE html>
<html>
<head>
<title>Test Execution Report</title>
<style>
body { font-family: Arial, sans-serif; margin: 20px; }
.summary { background: #f5f5f5; padding: 15px; border-radius: 5px; margin-bottom: 20px; }
.test { border: 1px solid #ddd; margin: 10px 0; padding: 15px; border-radius: 5px; }
.passed { border-left: 5px solid #4CAF50; }
.failed { border-left: 5px solid #f44336; }
.error { border-left: 5px solid #ff9800; }
.code { background: #f4f4f4; padding: 10px; border-radius: 3px; font-family: monospace; white-space: pre-wrap; }
table { border-collapse: collapse; width: 100%; }
th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
th { background-color: #4CAF50; color: white; }
</style>
</head>
<body>
<h1>Test Execution Report</h1>
<div class='summary'>
<h2>Summary</h2>
<table>
<tr><th>Metric</th><th>Count</th></tr>
<tr><td>Total Tests</td><td>3</td></tr>
<tr><td>Passed</td><td style='color: green;'>2</td></tr>
<tr><td>Failed</td><td style='color: red;'>1</td></tr>
<tr><td>Errors</td><td style='color: orange;'>0</td></tr>
</table>
</div>
<h2>Test Results</h2>
<div class='test passed'>
<h3>should identify config change from auth error alert</h3>
<p><strong>Status:</strong> PASSED</p>
<p><strong>Duration:</strong> 14685ms</p>
<h4>Verification</h4>
<p><strong>Result:</strong> ✅ PASSED</p>
<p><strong>Keyword Coverage:</strong> 100%</p>
<p><strong>Keywords Found:</strong> config, issuer, OAuth, auth-service, allowed</p>
<p><strong>Keywords Missing:</strong> </p>
<h4>Root Cause Analysis</h4>
<div class='code'>The root cause of the incident was a configuration change in the auth-service&#39;s ConfigMap, which removed the old OAuth issuer from the allowed list. This change led to authentication failures manifesting as 401 Unauthorized responses across multiple services, including the critical order-service. The failure was identified by the spike in 401 errors, the error logs indicating authentication failures, and the resolution involving restoring the old OAuth issuer to the allowed list. This highlights the importance of cautious deployment practices such as canary rollouts for configuration changes to prevent widespread authentication issues.</div>
</div>
<div class='test failed'>
<h3>should identify database pool exhaustion from latency alert</h3>
<p><strong>Status:</strong> FAILED</p>
<p><strong>Duration:</strong> 17878ms</p>
<h4>Verification</h4>
<p><strong>Result:</strong> ❌ FAILED</p>
<p><strong>Keyword Coverage:</strong> 60%</p>
<p><strong>Keywords Found:</strong> connection pool, database, timeout</p>
<p><strong>Keywords Missing:</strong> exhausted, HikariPool</p>
<h4>Root Cause Analysis</h4>
<div class='code'>The root cause of the incident is the exhaustion of the HikariCP connection pool in the api-service, caused by slow queries or connection leaks leading to prolonged holding of database connections. This resulted in high latency (average request duration of 2450ms, P95 exceeding 500ms), connection pool saturation at 100% utilization, and connection timeouts. The primary contributing factor appears to be a new query holding connections for too long after deployment. Remediation steps include identifying and optimizing slow queries, increasing the connection pool size, implementing query timeouts, and monitoring connection pool metrics to prevent recurrence.</div>
<h4>Error</h4>
<div class='code'>Should identify database pool exhaustion</div>
</div>
<div class='test passed'>
<h3>should identify downstream failure from error rate alert</h3>
<p><strong>Status:</strong> PASSED</p>
<p><strong>Duration:</strong> 15589ms</p>
<h4>Verification</h4>
<p><strong>Result:</strong> ✅ PASSED</p>
<p><strong>Keyword Coverage:</strong> 75%</p>
<p><strong>Keywords Found:</strong> payment-service, downstream, circuit breaker</p>
<p><strong>Keywords Missing:</strong> unavailable</p>
<h4>Root Cause Analysis</h4>
<div class='code'>The root cause of the incident was the timeout and subsequent failure to connect to the payment-service&#39;s database, which led to the payment-service returning a 503 error. This downstream service failure caused the order-service to experience errors, triggering the circuit breaker to open, and resulting in the elevated error rate. Remediation involves fixing network connectivity to the payment database and investigating the failure of the payment database or its network link.</div>
</div>
</body>
</html>
